---
title: Deploy Azure Kubernetes cluster with PowerShell
description: PowerShell script to deploy an Azure Kubernetes cluster.
---

# Deploy Azure Kubernetes cluster with PowerShell
## Optional - create environmental variables
```powershell 
$ID = Get-Random -Minimum 1000 -Maximum 9999
$RG = "ecommerce-rg-$ID"
$LOC = "uksouth"
$CLUSTER_NAME = "aks-$RG"
$DNS_LABEL = "dns-label-$RG"
```

## Create a resource group, Kubernetes cluster and get kubectl configuration credentials:

```powershell 
az group create --name $RG --location $LOC
az aks create -g $RG --name $CLUSTER_NAME --enable-managed-identity --node-count 1 --generate-ssh-keys
az aks get-credentials -g $RG --name $Cluster_NAME
kubectl get nodes # to get the final terminal output with node check
```


# Optional - one line code 

```pwsh
$ID = Get-Random -Minimum 1000 -Maximum 9999 ; $RG = "ecommerce-rg-$ID" ; $LOC = "uksouth" ; $CLUSTER_NAME = "aks-$RG" ; $DNS_LABEL = "dns-label-$RG" ; az group create --name $RG --location $LOC ; az aks create -g $RG --name $CLUSTER_NAME --enable-managed-identity --node-count 1 --generate-ssh-keys ; az aks get-credentials -g $RG --name $Cluster_NAME ; kubectl get nodes
```

# Optional - Delete Azure infrastructure after finishing the challenge steps to minimize costs:

```powershell
az group delete --name $RG --yes --no-wait
```


